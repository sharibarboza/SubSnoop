<div ng-include src="'views/searchnav.html'"></div>

<div class="main-content">
  <div class="content" layout="column" ng-cloak>

    <div ng-include src="'views/sidenav.html'"></div>
  
      <div class="user-banner sub-banner">
        <div class="table-pad" id="sub-page">
          <div class="row">
            <div class="col-md-9">
              <i class="fa fa-shield" aria-hidden="true"></i>
              <span class="reddit-name"><span class="baby-blue">/r/</span>{{ subreddit }}</span> <span class="badge num-subs">{{ username }}</span>
              <div class="banner-info">
                <p>Last seen <time-ago class="orange" from-time='{{ elemArray[0].created * 1000 }}'></time-ago></p>
              </div>
            </div>
            <div class="col-md-3" id="user-link-col">
              <p class="banner-info"><a href="https://www.reddit.com/r/{{ subreddit }}" class="white"><i class="fa fa-link orange" aria-hidden="true"></i> Visit subreddit</a> <i class="fa fa-reddit" aria-hidden="true"></i></p>
            </div>
          </div>
        </div>
      </div>

    <div id="sub-content" class="sub-table">
      <div ng-include src="'views/sub-sidebar.html'"></div>
      <div class="col-md-8 col-md-pull-4 sub-rows">

        <ol class="breadcrumb">
          <li class="breadcrumb-item"><strong><i class="fa fa-arrow-left gray" aria-hidden="true"></i> <a class="black" href="#/{{ username }}">Back to subreddits</a></strong></li>
        </ol>
        <br>

        <ul class="nav nav-tabs">
          <li ng-if="sub.comments.length > 0" ng-class="getActive(0)"><a href ng-click="setTab(0)"><strong>Comments</strong> <span class="badge tab-badge">{{ sub.comments.length }}</span></a></li>
          <li ng-if="sub.submissions.length > 0" ng-class="getActive(1)"><a href ng-click="setTab(1)"><strong>Submitted</strong> <span class="badge tab-badge">{{ sub.submissions.length }}</span></a></li>
        </ul>
        <br>

        <div class="table-options">
          <div class="row" id="table-start">
            <div class="col-md-3">
              <form name="sortForm">
                <md-select ng-model="data.selectedSort" placeholder="{{ data.selectedSort.name }}" ng-change="setSortOption()">
                  <md-option ng-repeat="sort in data.sortOptions" ng-value="sort" ng-selected="sort.value == data.selectedSort.value">
                    <span class="main-color low-weight">{{ sort.name }}</span>
                  </md-option>
                </md-select>
              </form>
            </div>
            <div class="col-md-3">
              <form name="viewForm">
                <md-select ng-model="subPage.viewby" placeholder="test" ng-change="setItemsPerPage(subPage.viewby.num)">
                  <md-option ng-repeat="view in views" ng-value="view" ng-selected="view.value == subPage.viewby.value">
                    <span class="main-color low-weight">{{ view.num }} {{ tabOptions[tab] }}</span>
                  </md-option>
                </md-select>
              </form>
            </div>
            <div class="col-md-6 paginate" align="right" id="top-paginate">
              <pagination total-items="sub[tabOptions[tab]].length" ng-model="subPage.current" class="pagination-sm" items-per-page="subPage.items" max-size="subPage.max" style="margin: -5px;"></pagination>
            </div>
          </div>
        </div>
        <br>
        <div id="post-table">
          <div ng-repeat="element in elemArray.slice(((subPage.current-1)*subPage.items), ((subPage.current)*subPage.items))">
            <div ng-if="element.type == 'comment'">
              <div ng-include src="'views/comment.html'"></div>
            </div>
            <div ng-if="element.type == 'submit'">
              <div ng-include src="'views/submission.html'"></div>
            </div>
          </div>
          <div class="row">
            <div class="col-md-6 pull-center" id="back-up">
              <back-top></back-top>
            </div>
            <div class="col-md-6 paginate">
              <pagination total-items="sub[tabOptions[tab]].length" ng-model="subPage.current" ng-change="backUp()" class="pagination-sm" items-per-page="subPage.items" max-size="subPage.max" id="bottom-paginate"></pagination>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

