<div ng-include src="'views/searchnav.html'"></div>

<div class="main-content" id="user-sub-page">
  <div class="content" layout="column" ng-cloak>

    <div ng-include src="'views/sidenav.html'"></div>

    <div class="banner-div">
      <div class="user-banner row" align="center">
        <div class="user-page">
          <div class="avatar-header">
            <div class="post-wing left-wing" align="center" style="border-right: 1px solid #C3D5DB;">
              {{ sub.comments.length }}
              <br>
              <strong>Comments</strong>
            </div>
            <div class="profile-img">
              <img ng-if="subInfo.icon_img" ng-src="{{ subInfo.icon_img }}" class="banner-img img-circle">
              <img ng-if="!subInfo.icon_img" ng-src="{{ '../images/logo.png' }}" class="banner-img img-circle">
            </div>
            <div class="post-wing right-wing" align="center" style="border-left: 1px solid #C3D5DB;">
              {{ sub.submissions.length }}
              <br>
              <strong>Submitted</strong>
            </div>
          </div>
          <span class="user-name" id="{{ redditor.name }}"><strong><span class="baby-blue2">/r/</span>{{ subreddit }}</strong></span>
          <br>
          <span class="badge num-subs">{{ username }}</span>
          <br><br>
          Current data from: <span class="bright-blue" ng-bind="firstPost * 1000 | amDateFormat: 'MMMM Do YYYY, h:mm a'"></span>
        </div>
      </div>
    </div>

    <div class="user-head-nav" align="center">
      <div class="col-sm-3 hidden-xs no-padding" align="left">
        <a ng-href="#/{{ username }}"><md-button class="md-raised md-primary visit-btn no-margin"><i class="fa fa-arrow-left" aria-hidden="true"></i> Back to subs</md-button></a>
      </div>
      <div class="col-sm-2 col-xs-4 post-tab" ng-click="setTab(2)" ng-class="tab == 2 ? 'underline-tab' : 'empty-class'"><strong class="light-gray">OVERVIEW</strong></div>
      <div class="col-sm-2 col-xs-4 post-tab" ng-click="setTab(0)" ng-class="tab == 0 ? 'underline-tab' : 'empty-class'"><strong class="light-gray">COMMENTS</strong></div>
      <div class="col-sm-2 col-xs-4 post-tab" ng-click="setTab(1)" ng-class="tab == 1 ? 'underline-tab' : 'empty-class'"><strong class="light-gray">POSTS</strong></div>
      <div class="col-sm-3 hidden-xs no-padding" align="right">
        <a ng-href="https://www.reddit.com/r/{{ subreddit }}"><md-button class="md-raised md-primary visit-btn no-margin">To Reddit page <i class="fa fa-external-link" aria-hidden="true"></i></md-button></a>
      </div>
    </div>

    <div class="buttons-mobile">
      <br>
      <div class="col-xs-6 no-padding" align="left">
        <a ng-href="#/{{ username }}"><md-button class="md-raised md-primary visit-btn no-margin"><i class="fa fa-arrow-left" aria-hidden="true"></i> Back to subs</md-button></a>
      </div> 
      <div class="col-xs-6 no-padding" align="right">
        <a ng-href="https://www.reddit.com/r/{{ subreddit }}"><md-button class="md-raised md-primary visit-btn no-margin"><i class="fa fa-reddit-alien" aria-hidden="true"></i> Reddit page </md-button></a>
      </div> 
    </div>

    <div class="sub-table column-pad">
      <div class="no-margin row" id="table-head">

        <div ng-if="tab == 2" class="col-md-8 no-padding">
          <div id="overview">
            <div ng-include src="'views/sub-info.html'"></div>
            <div ng-include src="'views/sub-table.html'"></div>
          </div>

          <div ng-include src="'views/sub-heatmap.html'"></div>

          <div ng-include src="'views/sub-wordcloud.html'"></div>

          <br>
          <div align="center" class="center-back">
            <back-top></back-top>
            <br><br>
          </div>
        </div>

        <div ng-if="tab == 0 && sub.comments.length == 0" class="col-md-8 no-padding">
          <h4 class="light-gray margin-pad">{{ username }} has no comments in {{ subreddit }}.</h4>
        </div>
        <div ng-if="tab == 1 && sub.submissions.length == 0" class="col-md-8 no-padding">
          <h4 class="light-gray margin-pad">{{ username }} has no submissions in {{ subreddit }}.</h4>
        </div>

        <div ng-if="(tab == 0 && sub.comments.length > 0) || (tab == 1 && sub.submissions.length > 0)" class="col-md-8 no-padding">

          <div class="post-page">
            <div class="row no-margin" id="table-start">
              <div class="col-md-6 no-padding dropdown-left-col">               
                <div class="btn-group select-dropdown">
                  <button type="button" class="form-control btn btn-default dropdown-toggle" data-toggle="dropdown">
                    {{ sortSelected.name }}
                  </button>
                  <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="sort in data.sortOptions" ng-click="setSortOption(sort)">{{ sort.name }}</li>
                  </ul>
                </div>
              </div>
              <div class="col-md-6 no-padding dropdown-right-col" style="padding-left: 7px;">
                <div class="btn-group select-dropdown">
                  <button type="button" class="form-control btn btn-default dropdown-toggle" data-toggle="dropdown">
                    View {{ subPage.items }}
                  </button>
                  <ul class="dropdown-menu" role="menu">
                    <li ng-repeat="view in views" ng-click="setItemsPerPage(view)">{{ view }}</li>
                  </ul>
                </div>
              </div>
            </div>

            <div class="row no-margin">
              <div class="col-md-6 viewing-row">
                <span class="small-font viewing-title">Viewing <strong class="orange">{{ slicedArray.length }}</strong> of {{ sub[tabOptions[tab]].length }} {{ tabOptions[tab] }} </span>
              </div>
              <div class="col-md-6 no-padding paginate" align="right" id="top-paginate">
                <pagination total-items="sub[tabOptions[tab]].length" ng-model="subPage.current" class="pagination-sm" items-per-page="subPage.items" max-size="subPage.max" style="margin: -5px;"></pagination>
              </div>
            </div>

          </div>

          <div id="{{ tabOptions[tab] }}">
            <div ng-repeat="element in sliceArray()">
              <div ng-if="element.type == 'comment'">
                <div ng-include src="'views/comment-no-title.html'"></div>
              </div>
              <div ng-if="element.type == 'submit'">
                <div ng-include src="'views/submission.html'"></div>
              </div>
            </div>
            <div class="row bottom-pag">
              <div class="col-md-6 pull-center no-padding center-back" id="back-up">
                <back-top></back-top>
              </div>
              <div class="col-md-6 paginate no-padding">
                <pagination total-items="sub[tabOptions[tab]].length" ng-model="subPage.current" ng-change="backUp()" class="pagination-sm" items-per-page="subPage.items" max-size="subPage.max" id="bottom-paginate"></pagination>
              </div>
            </div>
          </div>
        </div>

        <div class="col-md-4 no-padding" ng-class="{ 'hidden-xs' : page == 'comments' || page == 'submissions' }">
          <div ng-include src="'views/sub-side.html'"></div>
        </div>

        <div align="center" class="mobile-only">
          <br>
          <back-top></back-top>
          <br><br>
        </div>

      </div>
    </div>

  </div>
</div>

