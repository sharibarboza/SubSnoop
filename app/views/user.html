<div ng-include src="'views/searchnav.html'"></div> 

<div class="main-content" id="home-page">
  <div ng-if="notfound">
      <br>
      <h2 align="center" class="gray" id="notfound">Sorry, that user could not be found.</h2>
  </div>
  
  <div ng-if="!notfound" class="content" layout="column" ng-cloak>

    <div ng-include src="'views/sidenav.html'"></div>

    <div>
      <div class="sub-banner">
        <div class="table-pad">
          <div class="row">
            <div class="col-md-8">
              <i class="fa fa-3x fa-reddit"></i>
              <a href="https://www.reddit.com/user/{{ username }}" target="_blank"><span id="reddit-name"><span class="baby-blue">/u/</span>{{ username }}</span></a> <span class="badge" id="num-subs">{{ subLength }} <ng-pluralize count="subLength" when="{'1': 'subreddit', 'other': 'subreddits'}"></ng-pluralize></span>
            </div>
          </div>
        </div>
      </div>
      
      <div class="sub-table">
        <div ng-include src="'views/user-sidebar.html'"></div>
        <div class="col-md-8 col-md-pull-4 sub-rows">

          <div class="row" id="table-head">
            <div class="col-xs-6">
              <form name="myForm">
                <md-select ng-model="sortData.selectedSort" placeholder="{{ sortData.selectedSort.name }}" ng-change="setSortOption()">
                  <md-option ng-repeat="sort in sortData.sortOptions" ng-value="sort" ng-selected="sort.value == sortData.selectedSort.value">
                    <strong class="gray">{{ sort.name }}</strong>
                  </md-option>
                </md-select>
              </form>
            </div>
            <div class="col-xs-6 option-pos" align="right">
              <form>
                <md-input-container>
                  <label for="testInput" class="gray"><i class="glyphicon glyphicon-search" aria-hidden="true"></i> Search for a sub</label>
                  <input type="text" id="testInput"
                         ng-model="search" ng-change="changeSubs(search)" md-autofocus>
                </md-input-container>
                <button type="submit" style="display: none;" ng-controller="SidebarCtrl" ng-click="close()">Go!</button>
              </form>
            </div>
          </div>      
          <br>

          <div class="card" ng-repeat="subreddit in subList" id="sub-row">
            <div class="card-content row">
              <a href="#/{{ username }}/{{ subreddit }}/">
              <div class="col-md-6" id="sub-rank">
                <div class="col-md-2">
                  <span class="baby-blue"><strong>{{ 1 + $index }}</strong></span>
                </div>
                <div class="col-md-10">
                  <span id="sub-name"> /r/{{ subreddit }}</span><br>
                  <span class="gray sub-text">Last seen <span ng-bind="subs[subreddit].recent_activity | amDateFormat:'MMM Do YYYY, h:mm a'"></span></span>
                </div>
              </div>
              <div class="col-md-2 col-xs-4" id="sub-comments" align="center">
                <span class="purple number">{{ subs[subreddit].comments.length }}</span><br>
                <span class="gray sub-text">Comments</span>
              </div>
              <div class="col-md-2 col-xs-4" id="sub-submits" align="center">
                <span class="purple number">{{ subs[subreddit].submissions.length }}</span><br>
                <span class="gray sub-text">Submitted</span>
              </div>
              <div class="col-md-2 col-xs-4" id="sub-upvotes" align="center">
                <span class="number" ng-class="subs[subreddit].total_ups > 0 ? 'green' : 'orange'">{{ subs[subreddit].total_ups | number }}</span><br>
                <span class="gray sub-text">Upvotes</span>
              </div>
              </a>
            </div>
          </div>

          <div align="center" id="back-up">
            <back-top></back-top>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>