<div ng-include src="'views/searchnav.html'"></div>

<div class="main-content">
  <div ng-if="notfound">
     <h2 align="center">Sorry, that user could not be found.</h2>
  </div>

  <div ng-if="user" class="content" layout="column" ng-cloak ng-controller="SubsCtrl">
    <div layout="row" layout-sm="column" layout-align="space-around">
      <md-progress-circular ng-show="processing" md-mode="indeterminate"></md-progress-circular>
    </div>
    <div class="home-page" ng-show=ready>
      <div id="user-info">
        <div class="text-content">
          <div class="row">
            <div class="col-md-4" id="user-block">
              <p id="reddit-name"><span class="baby-blue">u/</span>{{ username }}</p>
              <p><a href="http://www.reddit.com/user/{{ username }}" class="coral" id="reddit-user-link">Go to reddit page <i class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></i></a></p>
            </div>
            <div class="col-md-4" id="sub-count" align="center">
              <p id="subreddits" class="badge"><span class="purples" id="num-subs">{{ subsArray.length }}</span> subreddits</p>
            </div>
            <div class="col-md-4 user-stats" align="right">
              <p>Redditor Since</p>
              <p class="coral" id="since-date" ng-bind="created | date:'yyyy / MMMM d'"></p>
            </div>
          </div>
          <div class="row" id="user-counts">
            <div class="col-md-3"><div>Total Comments (max. 1000)<p>{{ comments.length }}</p></div></div>
            <div class="col-md-3"><div>Total Comment Karma<p>{{ user.comment_karma }}</p></div></div>
            <div class="col-md-3"><div>Total Submissions (max. 1000)<p>{{ submissions.length }}</p></div></div>
            <div class="col-md-3"><div>Total Post/Link Karma<p>{{ user.link_karma }}</p></div></div>
          </div>
        </div>
      </div>

      <div class="alert alert-info" role="alert" align="center">Click a subreddit below to view its comments and submissions in detail.</div>

      <div class="dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Sort subreddits by
        <span class="caret"></span></button>
        <ul class="dropdown-menu">
          <li><a href="#">Subreddit name</a></li>
          <li><a href="#">Number of comments</a></li>
          <li><a href="#">Number of submissions</a></li>
          <li><a href="#">Total upvotes</a></li>
          <li><a href="#">Total comment upvotes</a></li>
          <li><a href="#">Total submission upvotes</a></li>
          <li><a href="#">Average upvotes per comment</a></li>
          <li><a href="#">Average upvotes per submission</a></li>
          <li><a href="#">Most activity</a></li>
          <li><a href="#">Most recent activity</a></li>
          <li><a href="#">Most recent comments</a></li>
          <li><a href="#">Most recent submissions</a></li>
        </ul>
      </div>

      <div id="sub-table">
        <div class="row sub-row" ng-repeat="subreddit in subsArray | orderBy: subreddit">
          <div class="col-md-3">
            <a href="http://www.reddit.com/r/{{ subreddit }}" target="_blank" id="sub-name">r/{{ subreddit }}</a>
          </div>
          <div class="col-md-2 sub-stat">
            <span class="label label-purple">Comments</span> <span class="badge">{{ subs[subreddit].comments.length }}</span>
          </div>
          <div class="col-md-2 sub-stat">
            <span class="label label-coral">Submitted</span> <span class="badge">{{ subs[subreddit].submissions.length }}</span>
          </div>
          <div class="col-md-2 sub-stat">
            <span class="label label-blue">Total Upvotes</span> <span class="badge">{{ subs[subreddit].total_ups }}</span>
          </div>
          <div class="col-md-3 sub-stat">
            <span class="label label-default">Last Seen</span> <span class="sub-date" ng-bind="subs[subreddit].recent_activity | date:'MMMM d, yyyy'"></span>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
