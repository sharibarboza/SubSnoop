<div ng-include src="'views/searchnav.html'"></div>

<div class="content" layout="column" ng-cloak>
  <div layout="row" layout-sm="column" layout-align="space-around">
    <md-progress-circular ng-show="processing" md-mode="indeterminate"></md-progress-circular>
  </div>
  <div class="home-page" ng-show=ready>
    <div id="user-info">
      <div class="text-content">
        <div class="row">
          <div class="col-md-4" id="user-block">
            <span id="reddit-name"><span class="baby-blue">u/</span>{{ username }}</span><br>
            <span><a href="http://www.reddit.com/user/{{ username }}" class="coral" id="reddit-user-link">Go to reddit page <i class="glyphicon glyphicon-circle-arrow-right" aria-hidden="true"></i></a></span>
          </div>
          <div class="col-md-4" id="sub-count" align="center">
            <span id="num-subs" class="badge">{{ subsArray.length }}</span><br><span class="coral">Subreddits</span>
          </div>
          <div class="col-md-4 user-stats" align="right">
            <span>Redditor Since</span><br>
            <p class="coral" id="since-date" ng-bind="created | date:'MMMM d, yyyy'"></p>
          </div>
        </div>
        <div class="row" id="user-counts">
          <div class="col-md-3"><div>Total Comments (max. 1000)<p>{{ comments.length }}</p></div></div>
          <div class="col-md-3"><div>Total Submissions (max. 1000)<p>{{ submissions.length }}</p></div></div>
          <div class="col-md-3"><div>Total Comment Karma<p>{{ user.comment_karma }}</p></div></div>
          <div class="col-md-3"><div>Total Post/Link Karma<p>{{ user.link_karma }}</p></div></div>
        </div>
      </div>
    </div>

    <div id="sub-table">
      <table class="table">
        <thead>
          <tr>
            <th class="col-md-1">#</th>
            <th class="col-md-1">Subreddit</th>
            <th class="col-md-1">Comments</th>
            <th class="col-md-1">Submissions</th>
            <th class="col-md-2">Last commented</th>
            <th class="col-md-2">Last submitted</th>
            <th class="col-md-2 center">Comment Ups</th>
            <th class="col-md-2 center">Submission Ups</th>
          </tr>
        </thead>
        <tbody>
          <tr ng-repeat="subreddit in subsArray | orderBy: subreddit">
            <th scope="row">{{ $index + 1 }}</th>
            <th><a href="http://www.reddit.com/r/{{ subreddit }}">r/{{ subreddit }}</a></th>
            <th class="center"><span class="badge badge-counts badge-comment">{{ subs[subreddit].comments.length }}</span></th>
            <th class="center"><span class="badge badge-counts badge-submit">{{ subs[subreddit].submissions.length }}</span></th>
            <th class="sub-date" ng-bind="subs[subreddit].recent_comment | date:'MMMM d, yyyy'"></th>
            <th class="sub-date" ng-bind="subs[subreddit].recent_submission | date:'MMMM d, yyyy'"></th>
            <th class="center"><span class="badge badge-count-ups badge-comment">{{ subs[subreddit].comment_ups }}</span></th>
            <th class="center"><span class="badge badge-count-ups badge-submit">{{ subs[subreddit].submitted_ups }}</span></th>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>
